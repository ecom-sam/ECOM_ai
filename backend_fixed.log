[INFO] Scanning for projects...
[INFO] 
[INFO] -------------------< com.ecom.ai:ecom-assistant-api >-------------------
[INFO] Building ecom-assistant-api 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.4.5:run (default-cli) > test-compile @ ecom-assistant-api >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ ecom-assistant-api ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.13.0:compile (default-compile) @ ecom-assistant-api ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ ecom-assistant-api ---
[INFO] skip non existing resourceDirectory /mnt/e/work/Couchbase/ecom_ai/ecom-assistant/ecom-assistant-api/src/test/resources
[INFO] 
[INFO] --- compiler:3.13.0:testCompile (default-testCompile) @ ecom-assistant-api ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.4.5:run (default-cli) < test-compile @ ecom-assistant-api <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.4.5:run (default-cli) @ ecom-assistant-api ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.5)

2025-07-31T17:42:34.966+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.EcomAssistantApplication         : Starting EcomAssistantApplication using Java 21.0.8 with PID 35509 (/mnt/e/work/Couchbase/ecom_ai/ecom-assistant/ecom-assistant-api/target/classes started by sam in /mnt/e/work/Couchbase/ecom_ai/ecom-assistant/ecom-assistant-api)
2025-07-31T17:42:34.971+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.EcomAssistantApplication         : No active profile set, falling back to 1 default profile: "default"
2025-07-31T17:42:40.018+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Couchbase repositories in DEFAULT mode.
2025-07-31T17:42:40.076+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 32 ms. Found 0 Couchbase repository interfaces.
2025-07-31T17:42:41.735+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Couchbase repositories in DEFAULT mode.
2025-07-31T17:42:43.033+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1294 ms. Found 0 Couchbase repository interfaces.
2025-07-31T17:42:43.041+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Couchbase repositories in DEFAULT mode.
2025-07-31T17:42:43.622+08:00  INFO 35509 --- [ecom-assistant] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 578 ms. Found 11 Couchbase repository interfaces.
2025-07-31T17:42:44.351+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'shiroConfig' of type [com.ecom.ai.ecomassistant.auth.config.ShiroConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [lifecycleBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-07-31T17:42:44.654+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseConfig' of type [com.ecom.ai.ecomassistant.db.config.CouchbaseConfig$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:46.281+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseClusterEnvironment' of type [com.couchbase.client.java.env.ClusterEnvironment] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:46.285+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.db.config.CouchbaseConfig        : Connecting to Couchbase cluster at 127.0.0.1
2025-07-31T17:42:45.979+08:00  INFO 35509 --- [ecom-assistant] [oundedElastic-1] c.c.c.c.c.DefaultConfigurationProvider   : Resolved seed nodes: [SeedNode{address='127.0.0.1'}]
2025-07-31T17:42:46.968+08:00  INFO 35509 --- [ecom-assistant] [   cb-io-kv-9-1] c.c.c.c.compression.snappy.SnappyHelper  : Using fast Snappy compression codec because this is little-endian hardware and `sun.misc.Unsafe` is accessible.
2025-07-31T17:42:47.023+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.core                       : [com.couchbase.core][CoreCreatedEvent] {"clientVersion":"3.7.9","clientGitHash":"b5ce2184","coreVersion":"3.7.9","coreGitHash":"b5ce2184","userAgent":"couchbase-java/3.7.9 (Linux 6.6.87.2-microsoft-standard-WSL2 amd64; OpenJDK 64-Bit Server VM 21.0.8+9-Ubuntu-0ubuntu124.04.1)","maxNumRequestsInRetry":32768,"ioEnvironment":{"nativeIoEnabled":true,"eventLoopThreadCount":8,"eventLoopGroups":["EpollEventLoopGroup"]},"ioConfig":{"captureTraffic":[],"mutationTokensEnabled":true,"networkResolution":"auto","dnsSrvEnabled":true,"tcpKeepAlivesEnabled":true,"tcpKeepAliveTimeMs":60000,"configPollIntervalMs":2500,"kvCircuitBreakerConfig":"disabled","queryCircuitBreakerConfig":"disabled","viewCircuitBreakerConfig":"disabled","searchCircuitBreakerConfig":"disabled","analyticsCircuitBreakerConfig":"disabled","managerCircuitBreakerConfig":"disabled","eventingCircuitBreakerConfig":"disabled","backupCircuitBreakerConfig":"disabled","numKvConnections":1,"maxHttpConnections":12,"idleHttpConnectionTimeoutMs":1000,"configIdleRedialTimeoutMs":300000,"memcachedHashingStrategy":"StandardMemcachedHashingStrategy","timerConfig":{"numTimers":1,"tickDurationMs":10,"numBuckets":512},"lowWaterMark":"32 KiB","highWaterMark":"64 KiB","sendBuffer":null,"receiveBuffer":null},"compressionConfig":{"enabled":true,"minRatio":0.83,"minSize":32},"securityConfig":{"tlsEnabled":false,"nativeTlsEnabled":true,"hostnameVerificationEnabled":true,"trustCertificates":null,"trustManagerFactory":null,"ciphers":[]},"timeoutConfig":{"kvMs":2500,"kvDurableMs":10000,"kvScanMs":75000,"managementMs":75000,"queryMs":75000,"viewMs":75000,"searchMs":75000,"analyticsMs":75000,"connectMs":10000,"disconnectMs":10000,"eventingMs":75000,"backupMs":75000},"loggerConfig":{"diagnosticContextEnabled":false},"orphanReporterConfig":{"emitIntervalMs":10000,"sampleSize":10,"queueLength":1024,"enabled":true},"thresholdLoggingTracerConfig":{"enabled":true,"emitIntervalMs":10000,"sampleSize":10,"queueLength":1024,"kvThresholdMs":500,"queryThresholdMs":1000,"searchThresholdMs":1000,"analyticsThresholdMs":1000,"viewThresholdMs":1000,"transactionsThresholdMs":5000},"loggingMeterConfig":{"enabled":true,"emitIntervalMs":600000},"retryStrategy":"BestEffortRetryStrategy","requestTracer":"ThresholdLoggingTracer","meter":"LoggingMeter","numRequestCallbacks":0,"scheduler":"ParallelScheduler","schedulerThreadCount":16,"transactionsConfig":{"durabilityLevel":"MAJORITY","timeoutMs":15000,"cleanupConfig":{"runLostAttemptsCleanupThread":true,"runRegularAttemptsCleanupThread":true,"cleanupWindowMs":60000,"cleanupSet":""},"numAtrs":1024,"metadataCollection":"none","scanConsistency":"none"},"preferredServerGroup":"null"} {"connectionString":"couchbase://127.0.0.1","coreId":"0x7dedcd0700000001","numCoreInstances":1}
2025-07-31T17:42:47.024+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.transactions               : [com.couchbase.transactions][TransactionsStartedEvent] Transactions successfully initialised, regular cleanup enabled=true, lost cleanup enabled=true
2025-07-31T17:42:47.025+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.node                       : [com.couchbase.node][NodeCreatedEvent] Node created {"coreId":"0x7dedcd0700000001","managerPort":"8091","remote":"127.0.0.1"}
2025-07-31T17:42:48.324+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseCluster' of type [com.couchbase.client.java.Cluster] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.399+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseClientFactory' of type [org.springframework.data.couchbase.SimpleCouchbaseClientFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.529+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.core                       : [com.couchbase.core][BucketOpenedEvent][145ms] Opened bucket "ECOM" {"coreId":"0x7dedcd0700000001"}
2025-07-31T17:42:48.543+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseCustomConversions' of type [org.springframework.data.couchbase.core.convert.CouchbaseCustomConversions] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.617+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseMappingContext' of type [org.springframework.data.couchbase.core.mapping.CouchbaseMappingContext] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.675+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean '(inner bean)#6e981e78' of type [org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.675+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean '(inner bean)#6e981e78' of type [org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean$TargetBeanObjectFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.691+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'mappingCouchbaseConverter' of type [org.springframework.data.couchbase.core.convert.MappingCouchbaseConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:48.794+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseTranslationService' of type [org.springframework.data.couchbase.core.convert.translation.JacksonTranslationService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.003+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseTemplate' of type [org.springframework.data.couchbase.core.CouchbaseTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.004+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseRepositoryOperationsMapping' of type [org.springframework.data.couchbase.repository.config.RepositoryOperationsMapping] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.011+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#3' of type [org.springframework.data.repository.config.PropertiesBasedNamedQueriesFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.012+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#3' of type [org.springframework.data.repository.core.support.PropertiesBasedNamedQueries] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.499+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'userRepository' of type [org.springframework.data.couchbase.repository.support.CouchbaseRepositoryFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.499+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'userRepository' of type [jdk.proxy2.$Proxy104] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.500+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'userService' of type [com.ecom.ai.ecomassistant.db.service.auth.UserService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.533+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#2' of type [org.springframework.data.repository.config.PropertiesBasedNamedQueriesFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.534+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#2' of type [org.springframework.data.repository.core.support.PropertiesBasedNamedQueries] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.541+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamRepository' of type [org.springframework.data.couchbase.repository.support.CouchbaseRepositoryFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.542+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamRepository' of type [jdk.proxy2.$Proxy106] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.542+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamService' of type [com.ecom.ai.ecomassistant.db.service.auth.TeamService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.546+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#1' of type [org.springframework.data.repository.config.PropertiesBasedNamedQueriesFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.546+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#1' of type [org.springframework.data.repository.core.support.PropertiesBasedNamedQueries] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.574+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamMembershipRepository' of type [org.springframework.data.couchbase.repository.support.CouchbaseRepositoryFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.574+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamMembershipRepository' of type [jdk.proxy2.$Proxy107] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.575+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamMembershipService' of type [com.ecom.ai.ecomassistant.db.service.auth.TeamMembershipService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.579+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#7' of type [org.springframework.data.repository.config.PropertiesBasedNamedQueriesFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.579+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbase.named-queries#7' of type [org.springframework.data.repository.core.support.PropertiesBasedNamedQueries] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.597+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamRoleRepository' of type [org.springframework.data.couchbase.repository.support.CouchbaseRepositoryFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.597+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamRoleRepository' of type [jdk.proxy2.$Proxy108] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.598+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'teamRoleService' of type [com.ecom.ai.ecomassistant.db.service.auth.TeamRoleService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.606+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'userManager' of type [com.ecom.ai.ecomassistant.core.service.UserManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.620+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'couchbaseRealm' of type [com.ecom.ai.ecomassistant.auth.realm.CouchbaseRealm] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.775+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'securityManager' of type [org.apache.shiro.web.mgt.DefaultWebSecurityManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.778+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'shiroFilterChainDefinition' of type [org.apache.shiro.spring.web.config.DefaultShiroFilterChainDefinition] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor [methodValidationPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:49.959+08:00  WARN 35509 --- [ecom-assistant] [           main] trationDelegate$BeanPostProcessorChecker : Bean 'authorizationAttributeSourceAdvisor' of type [org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected/applied to a currently created BeanPostProcessor []? Check the corresponding BeanPostProcessor declaration and its dependencies/advisors. If this bean does not have to be post-processed, declare it with ROLE_INFRASTRUCTURE.
2025-07-31T17:42:51.750+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-07-31T17:42:51.808+08:00  INFO 35509 --- [ecom-assistant] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-07-31T17:42:51.809+08:00  INFO 35509 --- [ecom-assistant] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-07-31T17:42:51.990+08:00  INFO 35509 --- [ecom-assistant] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-07-31T17:42:51.991+08:00  INFO 35509 --- [ecom-assistant] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 16882 ms
2025-07-31T17:42:54.450+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.a.v.CouchbaseSearchVectorStore       : Init Cluster Called
2025-07-31T17:42:54.584+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.a.v.CouchbaseSearchVectorStore       : Created bucket
2025-07-31T17:42:54.657+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.a.v.CouchbaseSearchVectorStore       : Opened Bucket
2025-07-31T17:42:54.708+08:00  INFO 35509 --- [ecom-assistant] [           main] c.c.client.core.util.ConsistencyUtil     : Waiting for config
2025-07-31T17:42:54.709+08:00  INFO 35509 --- [ecom-assistant] [           main] c.c.client.core.util.ConsistencyUtil     : Adding nodes from global config: [NodeIdentifier{canonical=127.0.0.1:8091, hostForNetworkConnections='127.0.0.1'}]
2025-07-31T17:42:54.710+08:00  INFO 35509 --- [ecom-assistant] [           main] c.c.client.core.util.ConsistencyUtil     : Adding nodes from bucket configs: [NodeIdentifier{canonical=127.0.0.1:8091, hostForNetworkConnections='127.0.0.1'}]
QA VectorStore configured:
  - Bucket: ECOM
  - Scope: AI
  - Collection: qa-vector
  - Expected Index: spring-ai-qa-vector-index
2025-07-31T17:42:55.030+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      : ðŸ”§ Tiered RAG Configuration:
2025-07-31T17:42:55.031+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      :   - Enabled: true
2025-07-31T17:42:55.031+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      :   - Priority: QA_FIRST
2025-07-31T17:42:55.032+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      :   - QA Vector: enabled=true, topK=3, strategy=DIRECT_FTS_FIRST
2025-07-31T17:42:55.032+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      :   - Document Vector: enabled=true, topK=6, threshold=0.7
2025-07-31T17:42:55.033+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.ai.service.TieredRAGService      :   - Max Results: 8, Fallback: true
2025-07-31T17:42:56.199+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.d.c.c.m.event.AuditingEventListener  : auditingHandler IS an IsNewAwareAuditingHandler: org.springframework.data.auditing.IsNewAwareAuditingHandler@6b49b697
2025-07-31T17:42:58.158+08:00  INFO 35509 --- [ecom-assistant] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-07-31T17:42:58.164+08:00  INFO 35509 --- [ecom-assistant] [           main] c.e.a.e.EcomAssistantApplication         : Started EcomAssistantApplication in 25.517 seconds (process running for 27.186)
2025-07-31T17:43:15.386+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-31T17:43:15.386+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-07-31T17:43:15.388+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-07-31T17:43:23.788+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: user options: null statement: SELECT `_class`, META(`user`).`id` AS __id, `name`, `email`, `password`, `status`, `systemRoles`, `teamMembershipIds`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `user` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.User" AND `email` = $1
2025-07-31T17:43:23.841+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["sam0219mm@ecom.com"],"client_context_id":"53ede457-df66-4b0f-a212-b2109f0fc43c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:43:24.140+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:43:24.143+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"e2a0e1c9-db14-4264-ab29-b464f420012e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:43:24.189+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@13cbcc87
2025-07-31T17:43:32.930+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:43:32.931+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2696fa5e-9416-4ad1-80b0-3fce78ecad80","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:43:32.938+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5b5fcbbf
2025-07-31T17:43:32.954+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5d51e167
2025-07-31T17:43:32.968+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:43:32.969+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"90d28f69-6af5-4de3-9da2-f64aed312968","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:43:32.974+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@73da389c
2025-07-31T17:43:32.986+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] d.c.c.ReactiveUpsertByIdOperationSupport : upsertById object=com.ecom.ai.ecomassistant.db.model.Dataset@3a904eb2 scope: AI collection: dataset options: null
2025-07-31T17:43:33.045+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] c.c.m.e.ValidatingCouchbaseEventListener : Validating object: com.ecom.ai.ecomassistant.db.model.Dataset@3a904eb2
2025-07-31T17:43:33.056+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : upsert options: {}{durabilityLevel: Optional.empty, persistTo: NONE, replicateTo: NONE, timeout: Optional.empty, retryStrategy: Optional.empty, clientContext: null, parentSpan: Optional.empty}
2025-07-31T17:44:07.973+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-8] o.springdoc.api.AbstractOpenApiResource  : Init duration for springdoc-openapi is: 3192 ms
2025-07-31T17:45:40.537+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@74c95822
2025-07-31T17:45:40.540+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:40.541+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"f87c4cf9-8939-4a0f-a98a-4e1648138e52","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:40.548+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@628a1d90
2025-07-31T17:45:40.550+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:40.550+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"de951e00-d764-4501-a5e3-c7e530729cc1","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:40.607+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:45:40.608+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"e00b3e49-ca32-4639-859f-20c35dd5ae5f","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:40.626+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:45:40.627+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"67ef65bd-2657-4bb8-908f-1dd584ba81a7","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:40.648+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@dfe652d
2025-07-31T17:45:40.651+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:40.652+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2ef03a85-6e73-4921-8aa0-9d478126d18a","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:40.659+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3398ae2
2025-07-31T17:45:40.661+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:40.662+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"59aad8ab-bddc-4c44-acb2-255df3c13b2b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:40.667+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:45:40.668+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"99a659f9-b189-4d41-aa8f-c10f39f0953e","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:40.679+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:45:40.680+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"0efcf23b-7d6b-4cf7-95f6-02828b8beaa8","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:58.738+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=5a87773c-b3e9-45ff-995a-a1f97f5ba073 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@3a8390a9
2025-07-31T17:45:58.746+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@e4cbf82
2025-07-31T17:45:58.749+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:58.749+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"72c215ff-9363-44cb-a93b-8f3fe61eaa95","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:58.756+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@6e68c58c
2025-07-31T17:45:58.759+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T17:45:58.759+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["5a87773c-b3e9-45ff-995a-a1f97f5ba073"],"client_context_id":"8f4c52c7-a30c-4364-b75b-7ac98f3dcfad","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:58.771+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=5a87773c-b3e9-45ff-995a-a1f97f5ba073 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@5141120
2025-07-31T17:45:58.773+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5f57f7b6
2025-07-31T17:45:58.775+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:58.776+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"677c2723-4424-4537-931b-6e675940ea0b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:58.781+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2d4c2244
2025-07-31T17:45:58.784+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T17:45:58.785+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["5a87773c-b3e9-45ff-995a-a1f97f5ba073"],"client_context_id":"daf1d00d-a022-4934-a1d5-16d4733e2375","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:59.608+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@140d7614
2025-07-31T17:45:59.611+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:59.613+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"f802e0c6-b62e-482a-b559-9168287dd779","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:59.619+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1aca9ae5
2025-07-31T17:45:59.621+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:59.622+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"e96189cf-ccb9-4ee3-9694-e3f276e5e344","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:59.628+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:45:59.629+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"00da6c1d-edf8-410c-bc99-8db85f002dc4","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:59.641+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:45:59.641+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"20569a86-300c-46c7-ad2c-031629371a51","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:59.657+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3eb6c73
2025-07-31T17:45:59.659+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:59.660+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"f2ade6d1-2c65-464f-b205-06ab4ec0bc66","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:59.666+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2e36b0ba
2025-07-31T17:45:59.669+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:45:59.670+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"34536230-ac1b-44cd-8d74-dfcf7464d595","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:45:59.678+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:45:59.679+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"7bc3dbdf-75ff-412a-ad0d-34f150f8b98f","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:45:59.689+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:45:59.690+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"87aa2ded-1914-4308-8e98-635bd89e1655","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:46:10.564+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.565+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"98379a15-d59c-480b-a6b3-995b109f88d8","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.578+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" AND META().id IN $ids ORDER BY name ASC
2025-07-31T17:46:10.579+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"8bbb1b70-21ae-485d-a4fa-034a75a750c5","metrics":false,"$ids":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:46:10.586+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@444f2d8e
2025-07-31T17:46:10.589+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.590+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"9e256c71-a618-4de7-909d-1df118470831","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.596+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@222b7f96
2025-07-31T17:46:10.599+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7445c9f0
2025-07-31T17:46:10.601+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.602+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"25ae26d9-23bf-4c6e-8a8a-1897c1a6da2e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.606+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@62d5d02d
2025-07-31T17:46:10.608+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5f4ba2a4
2025-07-31T17:46:10.610+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.611+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"11f2c68e-50f4-48eb-93ee-8647e333f1e5","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.616+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2665a114
2025-07-31T17:46:10.618+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7cb5e661
2025-07-31T17:46:10.620+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.620+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"7216a9fc-1949-4d10-8647-6b1cab4a675d","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.626+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@302d1562
2025-07-31T17:46:10.628+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@32f1cf41
2025-07-31T17:46:10.630+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.631+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"0d5298da-6ade-491f-86c3-f4f9f472c1d9","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.636+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3997b50a
2025-07-31T17:46:10.638+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6a42cab7
2025-07-31T17:46:10.639+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.640+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"7ef4815d-8402-43b4-b788-75bfe2dae00a","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.646+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@329c5498
2025-07-31T17:46:10.649+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@e2b0e4d
2025-07-31T17:46:10.651+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.652+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2a8b7f6f-72e0-42b1-bb69-55549185a406","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.658+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@a10c567
2025-07-31T17:46:10.660+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@76fbb1e0
2025-07-31T17:46:10.662+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.663+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"128a75e6-3d61-460c-9f64-79abe1a60811","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.669+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@26931333
2025-07-31T17:46:10.671+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@701c28ca
2025-07-31T17:46:10.673+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.673+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"4a6e7907-2651-4e11-be9f-4bcc8a6ff03b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.680+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7c2bf053
2025-07-31T17:46:10.682+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@57f42a87
2025-07-31T17:46:10.684+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.685+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"74ecb10f-904a-43ec-b7fd-cd022337c352","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.690+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@6940a1c1
2025-07-31T17:46:10.693+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@780b9e5b
2025-07-31T17:46:10.695+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.695+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"98ee2ae7-b284-45cb-9e0c-dfc847a9d2cc","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.701+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5b014061
2025-07-31T17:46:10.703+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@2d57f994
2025-07-31T17:46:10.706+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.707+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"cd2e2091-eb36-47ac-9b62-94fbc0b143f3","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.712+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@41f50b56
2025-07-31T17:46:10.714+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@65a8bc75
2025-07-31T17:46:10.716+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:46:10.716+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"3ee55c2e-f627-4d7c-84eb-9a6d890e3875","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.723+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@34fbeae9
2025-07-31T17:46:10.724+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-3] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e permission check result: hasSystemTeamPermission = false, hasAnyTeamPermission = true
2025-07-31T17:46:10.726+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" ORDER BY name ASC
2025-07-31T17:46:10.727+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"998d9bd1-80c0-4ead-a839-4fc507a76775","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:46:10.734+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-3] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e will see 3 teams (all teams: YES, context teams: 1)
2025-07-31T17:46:10.738+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement:         SELECT '' AS __id, tm.teamId AS teamId, COUNT(*) AS count
        FROM `team-membership` tm
        WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership"
        AND tm.teamId IN $teamIds
        GROUP BY tm.teamId

2025-07-31T17:46:10.739+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"b78c44b9-c5e7-430e-94b1-cd431b731458","metrics":false,"$teamIds":["aedb1365-fd24-4169-927a-f493fdfc4ff9","c79e8f7a-7d4d-47d7-982e-e87b69df5ab5","default_team"],"scan_consistency":"request_plus"}
2025-07-31T17:46:21.073+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets] with root cause

java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.createDataset(DatasetManager.java:119) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.createDataset(DatasetController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T17:51:55.709+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5994de53
2025-07-31T17:51:55.714+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:51:55.715+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"69087407-0cc4-4025-9431-a4979a21878f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:51:55.724+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@13289027
2025-07-31T17:51:55.727+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:51:55.728+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ae9aa117-38f4-4209-be7c-1961c2375d58","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:51:55.735+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:51:55.736+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"1db0a26b-d66c-4553-bf89-0c57e6cf581a","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:51:55.745+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:51:55.746+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"a26ad98b-9f20-4ab0-950f-2c9feb83b836","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:51:55.760+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@37d89a14
2025-07-31T17:51:55.762+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:51:55.763+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"cb38eaa0-4b7f-49fa-8101-368802258f59","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:51:55.768+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@75634666
2025-07-31T17:51:55.770+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:51:55.771+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ea169f73-7f6a-492d-9fc9-a95f8e647bd1","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:51:55.777+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:51:55.777+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"35c028e4-cfd7-4365-966d-5ffe3154a157","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:51:55.786+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:51:55.787+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"33d9166a-8597-46fa-a855-6fa737cfe99c","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:52:06.410+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.411+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"b444d387-591d-4db7-adaa-1a5e50321df4","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.423+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" AND META().id IN $ids ORDER BY name ASC
2025-07-31T17:52:06.424+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"83a8ac75-68d9-4f07-9cb3-6461bab43ae1","metrics":false,"$ids":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:52:06.432+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@367949fb
2025-07-31T17:52:06.434+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.435+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"fe72ddb2-eb13-4c58-8d12-431197419cf1","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.442+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3246dbec
2025-07-31T17:52:06.445+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@774443c0
2025-07-31T17:52:06.446+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.447+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"56056fdc-0c90-46d5-b883-6cf47db1372b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.453+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3ab337e4
2025-07-31T17:52:06.455+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@46f997d8
2025-07-31T17:52:06.458+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.459+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"17d26e4c-c266-4da3-9eb3-c2bd413f45ee","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.464+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@42e4bd50
2025-07-31T17:52:06.466+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@176bbc8f
2025-07-31T17:52:06.468+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.468+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"9fc34085-f935-42d4-8e6f-388e46ecab7c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.474+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@34c4a591
2025-07-31T17:52:06.476+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3e09a386
2025-07-31T17:52:06.478+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.479+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"467b7d8b-efc2-4a99-9066-f96a8dfd912c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.485+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@59e0972a
2025-07-31T17:52:06.488+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1325c75d
2025-07-31T17:52:06.489+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.491+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2997ed10-73e8-4eb3-af96-62f376f1ab0e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.497+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@25c1085
2025-07-31T17:52:06.499+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@713a96db
2025-07-31T17:52:06.501+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.502+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"5ba264ae-7d11-49b5-a2b4-6b9feb3c3b02","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.508+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2cbe0611
2025-07-31T17:52:06.510+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@111c23f4
2025-07-31T17:52:06.513+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.513+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"f021e94f-44a8-4c47-a187-2872bf1f5e96","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.519+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7326c16a
2025-07-31T17:52:06.521+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@560f1d9b
2025-07-31T17:52:06.524+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.525+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"d7227c92-e392-4948-80eb-9466aa875812","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.530+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@add17c5
2025-07-31T17:52:06.532+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7a2e96e9
2025-07-31T17:52:06.534+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.534+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"19df2bc0-31c9-4b49-b83b-657ef0272ab8","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.540+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3fc63557
2025-07-31T17:52:06.542+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@110b14f1
2025-07-31T17:52:06.543+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.544+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"80097024-e5c7-457b-b5eb-05107dc633df","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.549+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@738a4a2a
2025-07-31T17:52:06.552+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7d9d136c
2025-07-31T17:52:06.555+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.556+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"20a3cdc9-8d34-44cd-9d09-b44cc2d68835","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.561+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@73fffd05
2025-07-31T17:52:06.562+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3a1ac317
2025-07-31T17:52:06.564+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:52:06.564+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"3324cd74-2b03-4714-bad9-d5e89ee6ba1b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.570+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1b600564
2025-07-31T17:52:06.571+08:00  INFO 35509 --- [ecom-assistant] [io-8080-exec-10] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e permission check result: hasSystemTeamPermission = false, hasAnyTeamPermission = true
2025-07-31T17:52:06.572+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" ORDER BY name ASC
2025-07-31T17:52:06.573+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"694c69f7-5cf5-4491-84fd-e328a8434ed7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:52:06.578+08:00  INFO 35509 --- [ecom-assistant] [io-8080-exec-10] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e will see 3 teams (all teams: YES, context teams: 1)
2025-07-31T17:52:06.580+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement:         SELECT '' AS __id, tm.teamId AS teamId, COUNT(*) AS count
        FROM `team-membership` tm
        WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership"
        AND tm.teamId IN $teamIds
        GROUP BY tm.teamId

2025-07-31T17:52:06.581+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"14954b05-e871-4043-ae11-00909a49021b","metrics":false,"$teamIds":["aedb1365-fd24-4169-927a-f493fdfc4ff9","c79e8f7a-7d4d-47d7-982e-e87b69df5ab5","default_team"],"scan_consistency":"request_plus"}
2025-07-31T17:52:11.596+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets] with root cause

java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.createDataset(DatasetManager.java:119) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.createDataset(DatasetController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T17:52:32.819+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.metrics                    : [com.couchbase.metrics][LatencyMetricsAggregatedEvent][600s] Aggregated Latency Metrics: {"operations":{"analytics":{"corehttp":{"total_count":2,"percentiles_us":{"50.0":6979.583,"90.0":285212.671,"99.0":285212.671,"99.9":285212.671,"100.0":285212.671}}},"search":{"manager_search_get_all_indexes":{"total_count":1,"percentiles_us":{"50.0":1499.135,"90.0":1499.135,"99.0":1499.135,"99.9":1499.135,"100.0":1499.135}},"corehttp":{"total_count":2,"percentiles_us":{"50.0":5111.807,"90.0":270532.607,"99.0":270532.607,"99.9":270532.607,"100.0":270532.607}}},"management":{"manager_collections_get_all_scopes":{"total_count":2,"percentiles_us":{"50.0":2473.983,"90.0":2899.967,"99.0":2899.967,"99.9":2899.967,"100.0":2899.967}},"corehttp":{"total_count":1,"percentiles_us":{"50.0":2244.607,"90.0":2244.607,"99.0":2244.607,"99.9":2244.607,"100.0":2244.607}},"manager_buckets_get_all_buckets":{"total_count":1,"percentiles_us":{"50.0":26607.615,"90.0":26607.615,"99.0":26607.615,"99.9":26607.615,"100.0":26607.615}}},"query":{"corehttp":{"total_count":2,"percentiles_us":{"50.0":4456.447,"90.0":268435.455,"99.0":268435.455,"99.9":268435.455,"100.0":268435.455}},"query":{"total_count":66,"percentiles_us":{"50.0":4456.447,"90.0":6782.975,"99.0":73400.319,"99.9":73400.319,"100.0":73400.319}}},"kv":{"ping":{"total_count":1,"percentiles_us":{"50.0":1056.767,"90.0":1056.767,"99.0":1056.767,"99.9":1056.767,"100.0":1056.767}},"get":{"total_count":74,"percentiles_us":{"50.0":638.975,"90.0":897.023,"99.0":10027.007,"99.9":10027.007,"100.0":10027.007}},"upsert":{"total_count":1,"percentiles_us":{"50.0":12189.695,"90.0":12189.695,"99.0":12189.695,"99.9":12189.695,"100.0":12189.695}}},"views":{"corehttp":{"total_count":1,"percentiles_us":{"50.0":35913.727,"90.0":35913.727,"99.0":35913.727,"99.9":35913.727,"100.0":35913.727}}}},"meta":{"emit_interval_s":600}}
2025-07-31T17:53:27.136+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@41005231
2025-07-31T17:53:27.138+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:27.140+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ac9a8480-ecbe-4d09-b04d-8bc2a22cc6a7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:27.156+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5494f26f
2025-07-31T17:53:27.158+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:27.159+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"86cb3256-4c68-471b-adec-bd0852b93389","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:27.166+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:53:27.166+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"4dfe47f0-1151-4ace-906d-e87fdcf1e728","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:27.177+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:53:27.178+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"8d4bd8ba-4fb5-4214-93bd-44d67f30320d","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:27.199+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@575d5649
2025-07-31T17:53:27.202+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:27.203+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"f7665cb3-1095-45e5-ad19-597845f96516","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:27.210+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@449b8b84
2025-07-31T17:53:27.212+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:27.213+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"133e0286-fdda-4936-bb8b-39ff6ddaf3b7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:27.220+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:53:27.222+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"6a8fccfb-dc23-49c5-96b1-17a4dca4ab8f","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:27.231+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:53:27.232+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"db46fa6f-1724-438b-b426-93192f79cb9a","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:32.364+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: user options: null statement: SELECT `_class`, META(`user`).`id` AS __id, `name`, `email`, `password`, `status`, `systemRoles`, `teamMembershipIds`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `user` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.User" AND `email` = $1
2025-07-31T17:53:32.366+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["sam0219mm@ecom.com"],"client_context_id":"38e096eb-a2d9-4875-8012-9303e0aa5b4a","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.445+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:32.446+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"0f264a69-fa02-48a0-9ffa-b07c6814aff7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.451+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@15ae885
2025-07-31T17:53:32.731+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1ef51d64
2025-07-31T17:53:32.733+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:32.734+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"9db28cbb-18e1-4a1a-9a1e-3433496b93b2","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.739+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5bf790de
2025-07-31T17:53:32.742+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:32.742+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"03251240-1b08-4801-b741-db3a1447a90e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.748+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:53:32.749+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"d17dac97-ba33-41e9-a337-f17a9c930548","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:32.758+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:53:32.759+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"f0497107-832d-4d5a-97d6-8f707570a8ee","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:32.773+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1636d8e
2025-07-31T17:53:32.775+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:32.776+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"8f6e4a3d-96f6-4bf5-a633-3c30475252d3","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.782+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@414311ab
2025-07-31T17:53:32.784+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:32.785+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"e5d49be0-48ea-4303-a792-3938202f5388","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:32.792+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:53:32.793+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"5ba7d5da-72dc-419d-a47b-63cecc16dcdf","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:32.803+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:53:32.804+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"f02646b8-8fb8-4bd8-ad01-e82dd8592f3b","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:39.236+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.237+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"224f25da-fabe-444c-b874-da4c01b96517","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.245+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" AND META().id IN $ids ORDER BY name ASC
2025-07-31T17:53:39.246+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"ec7442a0-8546-46d6-b776-e84748d1c7f5","metrics":false,"$ids":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:53:39.251+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@13bdb855
2025-07-31T17:53:39.253+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.254+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"5306fb81-51f3-4e20-afcd-aac48de88018","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.259+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3b8704b8
2025-07-31T17:53:39.261+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@48f39e2d
2025-07-31T17:53:39.262+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.263+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"aa56c2d6-6197-4ddf-b175-46d305a4324e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.267+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@677ed4f1
2025-07-31T17:53:39.268+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@197fb75b
2025-07-31T17:53:39.270+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.270+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"4c39b617-144e-4ea2-bd03-fd761b405f39","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.274+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1a5ed208
2025-07-31T17:53:39.276+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@4e083598
2025-07-31T17:53:39.277+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.277+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"7307c3c4-c1f8-4529-ac4f-92e7620c6a0c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.282+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5f40a9f4
2025-07-31T17:53:39.283+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3b610828
2025-07-31T17:53:39.284+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.285+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"8686d2ec-b0df-4d6e-99be-4985e0b2dbfa","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.290+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@57c343de
2025-07-31T17:53:39.291+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@58e8084b
2025-07-31T17:53:39.292+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.293+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"c085a8ba-d93d-492b-918c-4a3880a9db3d","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.298+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2bd05ab
2025-07-31T17:53:39.299+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@312e6d9c
2025-07-31T17:53:39.300+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.301+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"adb5156d-71c6-4506-8d10-d8584c0c9207","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.305+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7c3e15d4
2025-07-31T17:53:39.306+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@648ce048
2025-07-31T17:53:39.308+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.308+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"8063296a-dcec-48a6-b22c-c60e8f724b3a","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.312+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@ef6212f
2025-07-31T17:53:39.313+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@4c76ffe0
2025-07-31T17:53:39.315+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.315+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"e9d6221d-8121-41c8-a3a3-5aab1fed55a6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.319+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@406ad30f
2025-07-31T17:53:39.320+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@43e7e5ea
2025-07-31T17:53:39.322+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.323+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"affd255f-08dd-43e5-80ea-faa63a5b4dcd","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.327+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7c275be0
2025-07-31T17:53:39.328+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@755327b
2025-07-31T17:53:39.330+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.331+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"adf14e69-c949-4968-88b2-939342b0993c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.335+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@11316b35
2025-07-31T17:53:39.337+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6d05044c
2025-07-31T17:53:39.338+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.339+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"8ea4e0c9-9355-4579-be5d-9e2e228c941f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.344+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2b3baa57
2025-07-31T17:53:39.345+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@55393a1
2025-07-31T17:53:39.347+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:53:39.347+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"fc707abd-51ac-448f-a1f1-2e9aae142190","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.352+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1f2138fd
2025-07-31T17:53:39.353+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-3] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e permission check result: hasSystemTeamPermission = false, hasAnyTeamPermission = true
2025-07-31T17:53:39.354+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" ORDER BY name ASC
2025-07-31T17:53:39.355+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"5a3f1fcb-9ea8-43b9-90b1-ac98a9cbc0f5","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:53:39.361+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-3] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e will see 3 teams (all teams: YES, context teams: 1)
2025-07-31T17:53:39.362+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement:         SELECT '' AS __id, tm.teamId AS teamId, COUNT(*) AS count
        FROM `team-membership` tm
        WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership"
        AND tm.teamId IN $teamIds
        GROUP BY tm.teamId

2025-07-31T17:53:39.363+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"30093b4b-8297-43eb-9da6-d76bf3052026","metrics":false,"$teamIds":["aedb1365-fd24-4169-927a-f493fdfc4ff9","c79e8f7a-7d4d-47d7-982e-e87b69df5ab5","default_team"],"scan_consistency":"request_plus"}
2025-07-31T17:53:47.837+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets] with root cause

java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.createDataset(DatasetManager.java:119) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.createDataset(DatasetController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T17:57:38.362+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@8e799ef
2025-07-31T17:57:38.365+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:57:38.366+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"cd0aca9f-bd50-4c93-aecd-0a6db5ed102f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:57:38.373+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7909ec6
2025-07-31T17:57:38.374+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:57:38.375+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"b44a83a5-1688-46b9-9873-58dca7defa56","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:57:38.382+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:57:38.383+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"7f651e8e-e525-44da-843c-dc8da82547e4","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:57:38.391+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:57:38.392+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"db9c0773-265e-469f-a878-c80310a04c4f","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:57:38.405+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1587482a
2025-07-31T17:57:38.407+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:57:38.408+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"5c0a995f-428f-41e0-825d-8857916c9801","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:57:38.413+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@455bdf6a
2025-07-31T17:57:38.415+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:57:38.415+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"bab4aa01-2631-4b57-9d3e-3eac7a859e07","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:57:38.420+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:57:38.421+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"6bd8504a-bbe1-43c3-9532-c42cd55f7236","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:57:38.429+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:57:38.430+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"2f9fcec1-d931-47fc-948d-7def880244a6","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:08.951+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: user options: null statement: SELECT `_class`, META(`user`).`id` AS __id, `name`, `email`, `password`, `status`, `systemRoles`, `teamMembershipIds`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `user` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.User" AND `email` = $1
2025-07-31T17:59:08.953+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["sam0219mm@ecom.com"],"client_context_id":"df1c44cb-027f-4da6-ad06-7e4c4bc64f8e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.031+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:09.032+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"64b079fb-913d-4a5e-ac0a-358690607abf","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.036+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@602884cf
2025-07-31T17:59:09.340+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6ed2d6f0
2025-07-31T17:59:09.342+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:09.343+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2c812aee-14f5-4549-b06a-4d006c7d3c67","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.354+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@ec519f1
2025-07-31T17:59:09.357+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:09.358+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"7a121bb8-6580-439a-87a0-90743dce9185","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.366+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:59:09.367+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"d4c7a15b-7c10-4df7-a662-c43c0e20a87a","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:09.378+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:59:09.379+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"d29f1f3d-9d22-42cd-8740-296b15ba3849","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:09.394+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@31033a70
2025-07-31T17:59:09.396+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:09.397+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"dbfe79a1-cd0b-418c-9e92-8e3a65109f5d","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.403+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@63d38c17
2025-07-31T17:59:09.405+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:09.406+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"015bdfd2-0e5d-427f-bf82-2e26e137c854","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:09.413+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name))) ORDER BY createdDateTime DESC LIMIT 12
2025-07-31T17:59:09.413+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"4e1aa9d2-593d-490f-9046-4c66ed640a04","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:09.422+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE (accessType = 'PUBLIC' OR (accessType = 'GROUP' AND teamId IN $userTeamIds) OR (accessType = 'PRIVATE' AND createdBy = $userId)) AND ($name = '' OR contains(lower(`name`), lower($name)))) predicate_query
2025-07-31T17:59:09.422+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"$name":"","$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"d014764c-5c61-443b-8d4d-3a60f15f24a8","metrics":false,"$userTeamIds":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:20.732+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.733+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"25ea1c73-ea3e-43dd-888a-5eb3c55c87cf","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.738+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" AND META().id IN $ids ORDER BY name ASC
2025-07-31T17:59:20.739+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"d68cf13b-24f5-42a7-8e6d-51712d0a02ee","metrics":false,"$ids":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T17:59:20.744+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@64724ca8
2025-07-31T17:59:20.745+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.746+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"1a421a6e-5758-4cac-ba1e-286b1a922c07","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.750+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@66c9f158
2025-07-31T17:59:20.752+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@65ac35e9
2025-07-31T17:59:20.753+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.754+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"e8e37ecc-5b23-4918-b434-93bdfe730c77","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.758+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@411bfdb0
2025-07-31T17:59:20.759+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@377aee37
2025-07-31T17:59:20.760+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.761+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"979b1535-e873-44dd-983b-df1e262e5274","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.765+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1e109ab1
2025-07-31T17:59:20.766+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1a17e7e7
2025-07-31T17:59:20.768+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.768+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"5b1e39bf-41e2-4458-8eef-6aba0c297351","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.773+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@47f6f68
2025-07-31T17:59:20.775+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5b461156
2025-07-31T17:59:20.776+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.777+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"a1d3edf7-c7d8-4d4c-8883-8895738103e6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.781+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@6178a76a
2025-07-31T17:59:20.783+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@40dffcb3
2025-07-31T17:59:20.785+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.785+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"df7590b1-18c5-4ee9-ae17-4713420ad2c4","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.790+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2b78995f
2025-07-31T17:59:20.791+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6603d3b0
2025-07-31T17:59:20.792+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.793+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ed7b1cab-4927-4495-a160-00bff476a675","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.799+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@42647bed
2025-07-31T17:59:20.801+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7de13d76
2025-07-31T17:59:20.803+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.803+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"698fc94e-6a54-43b8-b9eb-c75e21d399b6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.808+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@12bce1f4
2025-07-31T17:59:20.809+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6ada3e40
2025-07-31T17:59:20.810+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.810+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"2a7c109f-4540-4cf6-8326-b313ef8cd529","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.815+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@b809be5
2025-07-31T17:59:20.816+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@7ffe0d6e
2025-07-31T17:59:20.817+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.817+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"af0860d3-0205-4c8d-9352-08ea59dcd63c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.822+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@a38e024
2025-07-31T17:59:20.824+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@31abe71d
2025-07-31T17:59:20.825+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.826+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"a5bc7052-40f1-437d-a4ba-3b5416ad1efc","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.830+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3e7b0d7e
2025-07-31T17:59:20.831+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@31e1f2a2
2025-07-31T17:59:20.833+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.834+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"740fa804-0c7e-4554-a1e4-c8f8f99cc926","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.838+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7c951d7a
2025-07-31T17:59:20.839+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@12689efa
2025-07-31T17:59:20.841+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T17:59:20.841+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ba999215-4c76-4c18-8133-7e6b2abf4b6e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.846+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@741e6134
2025-07-31T17:59:20.847+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-6] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e permission check result: hasSystemTeamPermission = false, hasAnyTeamPermission = true
2025-07-31T17:59:20.849+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" ORDER BY name ASC
2025-07-31T17:59:20.849+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"0f2979a1-69d3-441e-9d67-9042e98e0fff","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T17:59:20.854+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-6] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e will see 3 teams (all teams: YES, context teams: 1)
2025-07-31T17:59:20.855+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement:         SELECT '' AS __id, tm.teamId AS teamId, COUNT(*) AS count
        FROM `team-membership` tm
        WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership"
        AND tm.teamId IN $teamIds
        GROUP BY tm.teamId

2025-07-31T17:59:20.855+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"a5ab7f07-3475-4ca2-9f2e-2adb1b81563a","metrics":false,"$teamIds":["aedb1365-fd24-4169-927a-f493fdfc4ff9","c79e8f7a-7d4d-47d7-982e-e87b69df5ab5","default_team"],"scan_consistency":"request_plus"}
2025-07-31T17:59:31.066+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets] with root cause

java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.createDataset(DatasetManager.java:119) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.createDataset(DatasetController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:00:09.564+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.565+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"01c16544-f712-489d-9db5-3afdb174251c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.572+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" AND META().id IN $ids ORDER BY name ASC
2025-07-31T18:00:09.572+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"479b7e62-6079-4a99-9fd1-560a5894fb38","metrics":false,"$ids":["c79e8f7a-7d4d-47d7-982e-e87b69df5ab5"],"scan_consistency":"request_plus"}
2025-07-31T18:00:09.576+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6ae64ba3
2025-07-31T18:00:09.578+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.578+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"006ae8b1-cffd-4c6c-9b7c-ef200599f23b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.581+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5c4e75a6
2025-07-31T18:00:09.582+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3bd86f91
2025-07-31T18:00:09.583+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.583+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"6251f8eb-c35e-4311-891e-f8e9b780578f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.587+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@68865084
2025-07-31T18:00:09.588+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@474afb77
2025-07-31T18:00:09.589+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.590+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"54994fca-5308-4656-a299-a00efb4c396b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.594+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3f96b0e8
2025-07-31T18:00:09.595+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@229dcf9c
2025-07-31T18:00:09.598+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.598+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"d9744af5-fe04-4966-94bc-7fe8a7dc5b3f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.602+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@78c5a93b
2025-07-31T18:00:09.603+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@68446417
2025-07-31T18:00:09.604+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.605+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"9b8e5ae0-3470-4039-9abf-9c81cb12c068","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.608+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@62df9807
2025-07-31T18:00:09.609+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@2e725aef
2025-07-31T18:00:09.611+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.611+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"7634b64f-800c-4594-a9cd-ca44b905de5a","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.615+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7b2ba26b
2025-07-31T18:00:09.617+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@308405c5
2025-07-31T18:00:09.618+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.618+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"77327b2e-b6bd-4fd6-9fc2-3792c1430e18","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.622+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2e05bc72
2025-07-31T18:00:09.623+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@121c2e7f
2025-07-31T18:00:09.624+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.625+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"61330e7d-c468-423d-af2a-3e0c3e4a6bd9","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.629+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@3482eead
2025-07-31T18:00:09.630+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@24387fd5
2025-07-31T18:00:09.631+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.632+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ac4f04db-245f-4981-883d-ad41af4db0d6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.636+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@275da10c
2025-07-31T18:00:09.637+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@54c11c4e
2025-07-31T18:00:09.638+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.639+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"ba870b07-c99e-4128-b7c3-f0ee69dbddb2","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.643+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@779577fd
2025-07-31T18:00:09.644+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@1034680d
2025-07-31T18:00:09.645+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.646+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"5e8f3746-d2e4-4eae-851c-da5e01cb4d16","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.650+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5aabfec6
2025-07-31T18:00:09.651+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@654aab1
2025-07-31T18:00:09.653+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.653+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"fac99378-f447-4d25-9c95-fd65ee09b545","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.658+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@5aa21f19
2025-07-31T18:00:09.659+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@69657040
2025-07-31T18:00:09.660+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:00:09.661+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"b6689fa8-1663-4200-9a85-3c83c1709221","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.665+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@6cbdee64
2025-07-31T18:00:09.666+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-9] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e permission check result: hasSystemTeamPermission = false, hasAnyTeamPermission = true
2025-07-31T18:00:09.667+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team options: null statement: SELECT `_class`, META(`team`).`id` AS __id, `name`, `description`, `ownerId`, `active`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.Team" ORDER BY name ASC
2025-07-31T18:00:09.668+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"aae876ef-369d-4c3a-8755-a1d7e1eeeecd","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:00:09.672+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-9] c.e.a.e.core.service.TeamManager         : User 8e5a59f8-cef9-435d-9271-4ba92a70906e will see 3 teams (all teams: YES, context teams: 1)
2025-07-31T18:00:09.675+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement:         SELECT '' AS __id, tm.teamId AS teamId, COUNT(*) AS count
        FROM `team-membership` tm
        WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership"
        AND tm.teamId IN $teamIds
        GROUP BY tm.teamId

2025-07-31T18:00:09.675+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-9] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"eb009584-2cfd-4aad-a401-aa0f8cc37fae","metrics":false,"$teamIds":["aedb1365-fd24-4169-927a-f493fdfc4ff9","c79e8f7a-7d4d-47d7-982e-e87b69df5ab5","default_team"],"scan_consistency":"request_plus"}
2025-07-31T18:00:55.994+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets] with root cause

java.lang.IllegalArgumentException: Team ID is required for GROUP access type datasets
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.createDataset(DatasetManager.java:119) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.createDataset(DatasetController.java:55) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:02:18.499+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.metrics                    : [com.couchbase.metrics][LatencyMetricsAggregatedEvent][600s] Aggregated Latency Metrics: {"operations":{"query":{"query":{"total_count":87,"percentiles_us":{"50.0":3686.399,"90.0":6488.063,"99.0":14221.311,"99.9":14221.311,"100.0":14221.311}}},"kv":{"get":{"total_count":96,"percentiles_us":{"50.0":411.647,"90.0":716.799,"99.0":1007.615,"99.9":1007.615,"100.0":1007.615}}}},"meta":{"emit_interval_s":600}}
2025-07-31T18:11:36.870+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-2] c.e.a.e.core.service.DatasetManager      : findVisibleDatasetsForChat called for user: 8e5a59f8-cef9-435d-9271-4ba92a70906e
2025-07-31T18:11:36.871+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@138a48e0
2025-07-31T18:11:36.873+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:36.874+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"c9e85e43-d12f-4010-995b-570e85c21266","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:36.883+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@53479ce0
2025-07-31T18:11:36.885+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:36.885+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"56b9544e-2706-4656-96de-5e076e583c19","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:36.901+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-2] c.e.a.e.db.service.DatasetService        : Error in DatasetService.findVisibleDatasets: name=, userId=8e5a59f8-cef9-435d-9271-4ba92a70906e, userTeamIds=[c79e8f7a-7d4d-47d7-982e-e87b69df5ab5], error=Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:36.903+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-2] c.e.a.e.core.service.DatasetManager      : Error in findVisibleDatasets for user 8e5a59f8-cef9-435d-9271-4ba92a70906e: Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:36.904+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-2] c.e.a.e.core.service.DatasetManager      : Error in findVisibleDatasetsForChat for user 8e5a59f8-cef9-435d-9271-4ba92a70906e: Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:36.905+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)] with root cause

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:37.124+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: chat-topic options: null statement: SELECT `_class`, META(`chat-topic`).`id` AS __id, `topic`, `userId`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `chat-topic` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.ChatTopic" AND `userId` = $userId AND contains(lower(`topic`), $topic) ORDER BY createdDateTime DESC LIMIT 20
2025-07-31T18:11:37.125+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"903fcd32-8f1f-4b79-8504-446dd0a3dcf0","metrics":false,"$topic":"","scan_consistency":"request_plus"}
2025-07-31T18:11:37.129+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: chat-topic options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`chat-topic`).`id` AS __id, `topic`, `userId`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `chat-topic` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.ChatTopic" AND `userId` = $userId AND contains(lower(`topic`), $topic)) predicate_query
2025-07-31T18:11:37.130+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-3] o.s.d.c.core.query.OptionsBuilder        : query options: {"$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"a7adbd10-f796-48d1-9983-4805d92fa67e","metrics":false,"$topic":"","scan_consistency":"request_plus"}
2025-07-31T18:11:37.136+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-4] c.e.a.e.core.service.DatasetManager      : findVisibleDatasetsForChat called for user: 8e5a59f8-cef9-435d-9271-4ba92a70906e
2025-07-31T18:11:37.138+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=8e5a59f8-cef9-435d-9271-4ba92a70906e scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@30fdc319
2025-07-31T18:11:37.140+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:37.141+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"d1a9c3ed-b87f-4c3a-a0c1-a2dbd9d9b6b6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:37.141+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: chat-topic options: null statement: SELECT `_class`, META(`chat-topic`).`id` AS __id, `topic`, `userId`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `chat-topic` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.ChatTopic" AND `userId` = $userId AND contains(lower(`topic`), $topic) ORDER BY createdDateTime DESC LIMIT 20
2025-07-31T18:11:37.141+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"f32c68df-e4b9-4f2d-b49d-7cdb054d7ed6","metrics":false,"$topic":"","scan_consistency":"request_plus"}
2025-07-31T18:11:37.145+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@55098250
2025-07-31T18:11:37.147+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:37.147+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-4] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["8e5a59f8-cef9-435d-9271-4ba92a70906e"],"client_context_id":"d7b7973a-9029-4d63-a5ac-4619c321bd7c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:37.147+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: chat-topic options: null statement: SELECT COUNT(*) AS count FROM (SELECT `_class`, META(`chat-topic`).`id` AS __id, `topic`, `userId`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `chat-topic` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.ChatTopic" AND `userId` = $userId AND contains(lower(`topic`), $topic)) predicate_query
2025-07-31T18:11:37.148+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-6] o.s.d.c.core.query.OptionsBuilder        : query options: {"$userId":"8e5a59f8-cef9-435d-9271-4ba92a70906e","client_context_id":"61e52d6d-4d2f-4c9c-89d7-9681a1326edb","metrics":false,"$topic":"","scan_consistency":"request_plus"}
2025-07-31T18:11:37.152+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-4] c.e.a.e.db.service.DatasetService        : Error in DatasetService.findVisibleDatasets: name=, userId=8e5a59f8-cef9-435d-9271-4ba92a70906e, userTeamIds=[c79e8f7a-7d4d-47d7-982e-e87b69df5ab5], error=Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:37.153+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-4] c.e.a.e.core.service.DatasetManager      : Error in findVisibleDatasets for user 8e5a59f8-cef9-435d-9271-4ba92a70906e: Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:37.154+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-4] c.e.a.e.core.service.DatasetManager      : Error in findVisibleDatasetsForChat for user 8e5a59f8-cef9-435d-9271-4ba92a70906e: Number of method parameters (4) must match the number of method invocation arguments (3)

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:37.155+08:00 ERROR 35509 --- [ecom-assistant] [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)] with root cause

java.lang.IllegalArgumentException: Number of method parameters (4) must match the number of method invocation arguments (3)
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor.collectVariables(QueryMethodValueEvaluationContextAccessor.java:182) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.doGetEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:234) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.QueryMethodValueEvaluationContextAccessor$DefaultQueryMethodValueEvaluationContextProvider.getEvaluationContext(QueryMethodValueEvaluationContextAccessor.java:222) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.query.ExtensionAwareQueryMethodEvaluationContextProvider.getEvaluationContext(ExtensionAwareQueryMethodEvaluationContextProvider.java:105) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.getExpression(StringBasedN1qlQueryParser.java:700) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.StringBasedN1qlQueryParser.<init>(StringBasedN1qlQueryParser.java:172) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.getStringN1qlQueryParser(StringQuery.java:130) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.query.StringQuery.toN1qlSelectString(StringQuery.java:75) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.assembleEntityQuery(ReactiveFindByQueryOperationSupport.java:292) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ReactiveFindByQueryOperationSupport$ReactiveFindByQuerySupport.all(ReactiveFindByQueryOperationSupport.java:181) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.core.ExecutableFindByQueryOperationSupport$ExecutableFindByQuerySupport.all(ExecutableFindByQueryOperationSupport.java:95) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$PagedExecution.execute(CouchbaseQueryExecution.java:151) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.CouchbaseQueryExecution$ResultProcessingExecution.execute(CouchbaseQueryExecution.java:84) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQuery.doExecute(AbstractCouchbaseQuery.java:93) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:132) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.couchbase.repository.query.AbstractCouchbaseQueryBase.execute(AbstractCouchbaseQueryBase.java:113) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:170) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-3.4.5.jar:3.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.data.couchbase.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145) ~[spring-data-couchbase-5.4.5.jar:5.4.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138) ~[spring-tx-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.6.jar:6.2.6]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.2.6.jar:6.2.6]
	at jdk.proxy2/jdk.proxy2.$Proxy146.findVisibleDatasets(Unknown Source) ~[na:na]
	at com.ecom.ai.ecomassistant.db.service.DatasetService.findVisibleDatasets(DatasetService.java:57) ~[ecom-assistant-db-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasets(DatasetManager.java:73) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.core.service.DatasetManager.findVisibleDatasetsForChat(DatasetManager.java:232) ~[ecom-assistant-core-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]
	at com.ecom.ai.ecomassistant.controller.DatasetController.getDatasetsForChat(DatasetController.java:109) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.6.jar:6.2.6]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.40.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:65) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:109) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:138) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:70) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:463) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.lambda$doFilterInternal$0(AbstractShiroFilter.java:378) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:91) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:84) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:389) ~[shiro-core-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:376) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:156) ~[shiro-web-2.0.4-jakarta.jar:2.0.4]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.6.jar:6.2.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.6.jar:6.2.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.40.jar:10.1.40]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-07-31T18:11:50.043+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: user options: null statement: SELECT `_class`, META(`user`).`id` AS __id, `name`, `email`, `password`, `status`, `systemRoles`, `teamMembershipIds`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `user` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.User" AND `email` = $1
2025-07-31T18:11:50.044+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin@example.com"],"client_context_id":"9a369ae5-a65c-46fe-bc40-53087fa25c2b","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.112+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:50.113+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"f0989f49-5167-4b33-ba44-ac9b629efa00","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.117+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@76f6002a
2025-07-31T18:11:50.119+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@6d4d3111
2025-07-31T18:11:50.141+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@183ed7f7
2025-07-31T18:11:50.142+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@750a2ca1
2025-07-31T18:11:50.143+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@27f80387
2025-07-31T18:11:50.355+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@278788bb
2025-07-31T18:11:50.358+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:50.359+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"95cc72b5-2ec1-4aac-9f98-60514b1b574f","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.365+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@7f105a7a
2025-07-31T18:11:50.367+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@3f53a4d3
2025-07-31T18:11:50.368+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@1b79410a
2025-07-31T18:11:50.370+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@20c08e
2025-07-31T18:11:50.372+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@7d9e897a
2025-07-31T18:11:50.374+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:11:50.375+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"15ab0801-9735-4e87-add6-c6dea3c7ece4","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.382+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:11:50.383+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"29904ba9-af51-4260-9415-115b7130b4e6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.395+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@5cd1dd73
2025-07-31T18:11:50.397+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:11:50.397+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"c5b0feb5-9dfb-4790-9905-b8fc02c2c798","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.402+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@d3472c1
2025-07-31T18:11:50.404+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@3a9ac661
2025-07-31T18:11:50.405+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@3687f68f
2025-07-31T18:11:50.406+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@64ef9f69
2025-07-31T18:11:50.407+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@4ae35b4f
2025-07-31T18:11:50.408+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:11:50.409+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"7d02240c-e539-422a-9a04-8be252d9702e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:11:50.415+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:11:50.415+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"30e14ff4-9fa0-4df8-9ef8-d4e3694081f9","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:04.170+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.metrics                    : [com.couchbase.metrics][LatencyMetricsAggregatedEvent][600s] Aggregated Latency Metrics: {"operations":{"query":{"query":{"total_count":16,"percentiles_us":{"50.0":3702.783,"90.0":5013.503,"99.0":7045.119,"99.9":7045.119,"100.0":7045.119}}},"kv":{"get":{"total_count":21,"percentiles_us":{"50.0":606.207,"90.0":913.407,"99.0":3833.855,"99.9":3833.855,"100.0":3833.855}}}},"meta":{"emit_interval_s":600}}
2025-07-31T18:12:37.781+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@4c8e66e
2025-07-31T18:12:37.783+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:12:37.783+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"df017539-a10e-4a04-9b14-c7ec235a5238","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:37.789+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@21456cbc
2025-07-31T18:12:37.790+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@6a2144bc
2025-07-31T18:12:37.791+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@29192400
2025-07-31T18:12:37.792+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@40579184
2025-07-31T18:12:37.793+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@4a7d35be
2025-07-31T18:12:37.794+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:12:37.794+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"d333c1de-8550-45af-ba88-7b547d1edbda","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:37.799+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:12:37.800+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"cb6f7a36-76bc-412e-b1d6-a3de39a4efbe","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:37.807+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@6150455f
2025-07-31T18:12:37.809+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:12:37.810+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"fe96698d-dbcc-4303-b4f1-58690aede450","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:37.814+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@2d420533
2025-07-31T18:12:37.815+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@1a96d393
2025-07-31T18:12:37.816+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@4c5e1e84
2025-07-31T18:12:37.817+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@2f47d0ed
2025-07-31T18:12:37.818+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@129123ab
2025-07-31T18:12:37.819+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:12:37.819+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"355dfc21-3a64-4734-8686-17a9610321c9","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:37.824+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:12:37.825+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"93414346-ba92-4326-9c61-b64ab5c86964","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:51.583+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=9956e90c-5704-48f7-83ba-32404c9aa839 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@56c91aa4
2025-07-31T18:12:51.602+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=9956e90c-5704-48f7-83ba-32404c9aa839 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@ee9a4c4
2025-07-31T18:12:56.967+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=f560409a-778b-49d0-a6ba-b0b44d4266cc scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@262635bc
2025-07-31T18:12:56.969+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:12:56.969+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["f560409a-778b-49d0-a6ba-b0b44d4266cc"],"client_context_id":"9ec2c4ba-a85c-41c8-b8cf-a0ca25cd4272","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:56.980+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=f560409a-778b-49d0-a6ba-b0b44d4266cc scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@2a199ce9
2025-07-31T18:12:56.981+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:12:56.982+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["f560409a-778b-49d0-a6ba-b0b44d4266cc"],"client_context_id":"a71543ee-398e-4023-864c-17ede268094d","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.293+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@3eb77021
2025-07-31T18:12:58.297+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:12:58.298+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"90c0ae9b-b54e-4aba-9d1c-9342e1a268a3","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.306+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@13708b4c
2025-07-31T18:12:58.308+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@8e77ef2
2025-07-31T18:12:58.309+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@dd431b7
2025-07-31T18:12:58.311+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@e290db
2025-07-31T18:12:58.313+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@175f5160
2025-07-31T18:12:58.316+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:12:58.317+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"14709df9-e346-4493-8b17-3fcb981aadae","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.325+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:12:58.326+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"df8bbe61-36f6-44cf-90ed-13a2a65e73a8","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.335+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@42a1213a
2025-07-31T18:12:58.337+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:12:58.338+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"f3b54fca-f747-41b7-aff8-302f45d722ed","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.343+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@283250b6
2025-07-31T18:12:58.345+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@4061eb56
2025-07-31T18:12:58.346+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@6751b80a
2025-07-31T18:12:58.347+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@2cb2fd2b
2025-07-31T18:12:58.349+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@163fbfeb
2025-07-31T18:12:58.350+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:12:58.351+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"ec87ab0f-f83f-4cb7-b22f-d63cc0266c70","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.358+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:12:58.359+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"861f106b-31c3-4d7e-a2f4-6696bcdb275e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.940+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=ec96ee5d-a843-440e-9255-2e3a714d4b55 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@8cb3127
2025-07-31T18:12:58.942+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:12:58.943+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["ec96ee5d-a843-440e-9255-2e3a714d4b55"],"client_context_id":"48bb18a5-778a-4ab7-88c5-f796dff00da2","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:12:58.954+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=ec96ee5d-a843-440e-9255-2e3a714d4b55 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@37105a34
2025-07-31T18:12:58.956+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:12:58.957+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-2] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["ec96ee5d-a843-440e-9255-2e3a714d4b55"],"client_context_id":"87941fdc-2090-4603-af00-fdc1c55f14be","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.123+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@4a40848e
2025-07-31T18:13:00.125+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:13:00.126+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"a22345dc-64cb-4f6b-b2ab-7cfe980e50c7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.131+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1514e444
2025-07-31T18:13:00.133+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@730cccdb
2025-07-31T18:13:00.134+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@3d2642c0
2025-07-31T18:13:00.135+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@34f772e8
2025-07-31T18:13:00.136+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@67386f6
2025-07-31T18:13:00.138+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:13:00.138+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"7de81de9-31c7-4d9b-8ad2-be5aeadcaed7","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.143+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:13:00.144+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"9e3bfe90-fb6c-4164-9631-b585de68d158","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.152+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@247cbd97
2025-07-31T18:13:00.155+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:13:00.155+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"06872cde-0a27-4f2b-b9b7-8428c08873e6","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.160+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@8897926
2025-07-31T18:13:00.162+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@1cf954a4
2025-07-31T18:13:00.163+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@7140d20a
2025-07-31T18:13:00.164+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@309149b0
2025-07-31T18:13:00.165+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@739246cd
2025-07-31T18:13:00.166+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT `_class`, META(`dataset`).`id` AS __id, `name`, `description`, `teamId`, `accessType`, `authorizedTeamIds`, `tags`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset" ORDER BY createdDateTime DESC,name ASC LIMIT 12
2025-07-31T18:13:00.167+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"33e212c1-2e72-42c6-861c-a65bb035e6d4","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:00.172+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: dataset options: null statement: SELECT COUNT("*") AS `count` FROM `dataset` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Dataset"
2025-07-31T18:13:00.172+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-7] o.s.d.c.core.query.OptionsBuilder        : query options: {"client_context_id":"c1505666-7c19-451f-90a9-e18005f8039c","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:01.178+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=25c8b4ae-9124-4647-98a3-a922cd3cbe04 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@59cbcd21
2025-07-31T18:13:01.180+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:13:01.181+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-8] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["25c8b4ae-9124-4647-98a3-a922cd3cbe04"],"client_context_id":"aadef7d0-6739-4ccc-9738-c69612bb3cde","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:01.211+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=25c8b4ae-9124-4647-98a3-a922cd3cbe04 scope: AI collection: dataset options: com.couchbase.client.java.kv.GetOptions@1196ee75
2025-07-31T18:13:01.213+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: document options: null statement: SELECT `_class`, META(`document`).`id` AS __id, `datasetId`, `fileName`, `fullPath`, `storageType`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `document` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.Document" AND `datasetId` = $1
2025-07-31T18:13:01.213+08:00 DEBUG 35509 --- [ecom-assistant] [io-8080-exec-10] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["25c8b4ae-9124-4647-98a3-a922cd3cbe04"],"client_context_id":"10ef9c5e-085e-4fc2-a7f0-a8a7406e1c6e","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:01.215+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] c.e.a.e.controller.QAController          : Checking QA verification permission for user: super_admin
2025-07-31T18:13:01.215+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@41b933cf
2025-07-31T18:13:01.217+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:13:01.218+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"3f1b185f-f61c-4065-a6a3-1ab5d26194b8","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:01.225+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1c4b1ce0
2025-07-31T18:13:01.226+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@71316f26
2025-07-31T18:13:01.228+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@791e1d84
2025-07-31T18:13:01.230+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@3872a203
2025-07-31T18:13:01.232+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@7c1a15f1
2025-07-31T18:13:01.234+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] c.e.a.e.controller.QAController          : User super_admin has roles: [team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:çŸ¥è­˜åº«ç®¡ç†è€…, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:çŸ¥è­˜åº«è²¢ç»è€…, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:åœ˜éšŠæˆå“¡, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:åœ˜éšŠç®¡ç†è€…, system:SUPER_ADMIN] and permissions: [team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:team:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:team:view, system:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:view, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:file:upload]
2025-07-31T18:13:01.235+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] c.e.a.e.controller.QAController          : User super_admin has admin role access
2025-07-31T18:13:01.238+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: qa options: null statement: SELECT `_class`, META(`qa`).`id` AS __id, `question`, `answer`, `datasetId`, `datasetName`, `documentName`, `fileName`, `documentId`, `questionIndex`, `contentType`, `createdAt`, `updatedAt`, `verificationStatus`, `verifiedBy`, `verifiedAt`, `verificationNote`, `vectorized`, `tags`, `vectorId` FROM `ECOM`.`AI`.`qa` qa WHERE qa.documentId = $1 ORDER BY qa.questionIndex ASC
2025-07-31T18:13:01.239+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-1] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["0633e524-57c8-4136-a6db-e338b1bd6523"],"client_context_id":"79d6fdb9-c7b4-457d-908e-3d6ba6cdeff9","metrics":false,"scan_consistency":"not_bounded"}
2025-07-31T18:13:01.410+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-1] c.e.a.e.controller.QAController          : QA stats for document 0633e524-57c8-4136-a6db-e338b1bd6523: total=10, pending=5, approved=4, rejected=1
2025-07-31T18:13:01.419+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-5] c.e.a.e.controller.QAController          : Checking QA verification permission for user: super_admin
2025-07-31T18:13:01.420+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=super_admin scope: AI collection: user options: com.couchbase.client.java.kv.GetOptions@138ce8f7
2025-07-31T18:13:01.423+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: team-membership options: null statement: SELECT `_class`, META(`team-membership`).`id` AS __id, `userId`, `teamId`, `teamRoles`, `createdBy`, `createdDateTime`, `lastModifiedBy`, `lastModifiedDateTime` FROM `team-membership` WHERE `_class` = "com.ecom.ai.ecomassistant.db.model.auth.TeamMembership" AND `userId` = $1
2025-07-31T18:13:01.423+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["super_admin"],"client_context_id":"648adcbd-4c15-4130-a130-9a4daaa7f216","metrics":false,"scan_consistency":"request_plus"}
2025-07-31T18:13:01.428+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=c79e8f7a-7d4d-47d7-982e-e87b69df5ab5 scope: AI collection: team options: com.couchbase.client.java.kv.GetOptions@1c339804
2025-07-31T18:13:01.430+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-contributor scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@13dcd958
2025-07-31T18:13:01.431+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-member scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@982a9e3
2025-07-31T18:13:01.433+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=dataset-manager scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@7d3d3374
2025-07-31T18:13:01.434+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] s.d.c.c.ReactiveFindByIdOperationSupport : findById key=team-admin scope: AI collection: team-role options: com.couchbase.client.java.kv.GetOptions@7dce776f
2025-07-31T18:13:01.435+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-5] c.e.a.e.controller.QAController          : User super_admin has roles: [team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:çŸ¥è­˜åº«ç®¡ç†è€…, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:çŸ¥è­˜åº«è²¢ç»è€…, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:åœ˜éšŠæˆå“¡, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:åœ˜éšŠç®¡ç†è€…, system:SUPER_ADMIN] and permissions: [team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:team:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:team:view, system:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:view, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:*, team:c79e8f7a-7d4d-47d7-982e-e87b69df5ab5:dataset:file:upload]
2025-07-31T18:13:01.437+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-5] c.e.a.e.controller.QAController          : User super_admin has admin role access
2025-07-31T18:13:01.438+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] .c.c.ReactiveFindByQueryOperationSupport : findByQuery scope: AI collection: qa options: null statement: SELECT `_class`, META(`qa`).`id` AS __id, `question`, `answer`, `datasetId`, `datasetName`, `documentName`, `fileName`, `documentId`, `questionIndex`, `contentType`, `createdAt`, `updatedAt`, `verificationStatus`, `verifiedBy`, `verifiedAt`, `verificationNote`, `vectorized`, `tags`, `vectorId` FROM `ECOM`.`AI`.`qa` qa WHERE qa.documentId = $1 ORDER BY qa.questionIndex ASC
2025-07-31T18:13:01.439+08:00 DEBUG 35509 --- [ecom-assistant] [nio-8080-exec-5] o.s.d.c.core.query.OptionsBuilder        : query options: {"args":["0633e524-57c8-4136-a6db-e338b1bd6523"],"client_context_id":"f0d304cb-c05f-4f6a-867a-27b0df25c537","metrics":false,"scan_consistency":"not_bounded"}
2025-07-31T18:13:01.535+08:00  INFO 35509 --- [ecom-assistant] [nio-8080-exec-5] c.e.a.e.controller.QAController          : QA stats for document 0633e524-57c8-4136-a6db-e338b1bd6523: total=10, pending=5, approved=4, rejected=1
2025-07-31T18:21:49.191+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.metrics                    : [com.couchbase.metrics][LatencyMetricsAggregatedEvent][600s] Aggregated Latency Metrics: {"operations":{"query":{"query":{"total_count":28,"percentiles_us":{"50.0":3768.319,"90.0":6225.919,"99.0":140509.183,"99.9":140509.183,"100.0":140509.183}}},"kv":{"get":{"total_count":56,"percentiles_us":{"50.0":532.479,"90.0":872.447,"99.0":946.175,"99.9":946.175,"100.0":946.175}}}},"meta":{"emit_interval_s":600}}
2025-07-31T22:08:10.475+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-07-31T22:08:10.479+08:00  INFO 35509 --- [ecom-assistant] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-07-31T22:08:10.485+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] com.couchbase.transactions.cleanup       : Waiting for 1 regular background threads to exit
2025-07-31T22:08:10.525+08:00  INFO 35509 --- [ecom-assistant] [b-txn-cleanup-4] c.c.transactions.cleanup.regular         : Stopping background cleanup thread for transactions from this client
2025-07-31T22:08:10.526+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] c.couchbase.transactions.cleanup.lost    : Client db8fe stopping lost cleanup process, 0 threads running
2025-07-31T22:08:10.535+08:00  INFO 35509 --- [ecom-assistant] [b-txn-cleanup-4] c.couchbase.transactions.cleanup.lost    : Client db8fe stopped lost cleanup process and removed client from client records
2025-07-31T22:08:10.535+08:00  INFO 35509 --- [ecom-assistant] [b-txn-cleanup-4] com.couchbase.transactions.cleanup       : Background threads have exitted
2025-07-31T22:08:10.571+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.core                       : [com.couchbase.core][BucketClosedEvent][4494us] Closed bucket "ECOM" {"coreId":"0x7dedcd0700000001"}
2025-07-31T22:08:10.572+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.node                       : [com.couchbase.node][NodeDisconnectedEvent][3058us] Node disconnected {"coreId":"0x7dedcd0700000001","managerPort":"8091","remote":"127.0.0.1"}
2025-07-31T22:08:10.572+08:00  INFO 35509 --- [ecom-assistant] [      cb-events] com.couchbase.core                       : [com.couchbase.core][ShutdownCompletedEvent][25ms] Completed shutdown and closed all open buckets {"coreId":"0x7dedcd0700000001"}
2025-07-31T22:08:10.615+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] o.s.a.v.CouchbaseSearchVectorStore       : Connection with cluster closed
2025-07-31T22:08:10.616+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] com.couchbase.transactions.cleanup       : Waiting for 0 regular background threads to exit
2025-07-31T22:08:10.616+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] c.couchbase.transactions.cleanup.lost    : Client db8fe stopping lost cleanup process, 0 threads running
2025-07-31T22:08:10.618+08:00  WARN 35509 --- [ecom-assistant] [ionShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Invocation of close method failed on bean with name 'vectorStore': java.lang.RuntimeException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'ignoreThen' (and no fallback has been configured)
2025-07-31T22:08:10.626+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] com.couchbase.transactions.cleanup       : Waiting for 0 regular background threads to exit
2025-07-31T22:08:10.627+08:00  INFO 35509 --- [ecom-assistant] [ionShutdownHook] c.couchbase.transactions.cleanup.lost    : Client db8fe stopping lost cleanup process, 0 threads running
2025-07-31T22:08:10.627+08:00  WARN 35509 --- [ecom-assistant] [ionShutdownHook] o.s.b.f.support.DisposableBeanAdapter    : Custom destroy method 'disconnect' on bean with name 'couchbaseCluster' propagated an exception: java.lang.RuntimeException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 10000ms in 'ignoreThen' (and no fallback has been configured)
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  04:25 h
[INFO] Finished at: 2025-07-31T22:08:11+08:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.4.5:run (default-cli) on project ecom-assistant-api: Process terminated with exit code: 143 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
